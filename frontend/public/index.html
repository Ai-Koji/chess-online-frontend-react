<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/static/media/favicon.jpg" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#000000" />
		<meta name="robots" content="noindex, nofollow"/>
		<link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
		<link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
		<title>React App</title>
	</head>

	<body>
		<div class="preloader-wrapper">
			<div class="spinner"></div>
		</div>
		<header>
			<div class="container">
				<div class="logo">
					<img src="/static/media/logo.png" alt="Logo" />
				</div>
				<nav>
					<ul class="left">
						<li><a href="/board">Доска</a></li>
						<li><a href="/debuts">Дебюты</a></li>
						<li><a href="/beginner-lessons">Для начинающих</a></li>
						<li><a href="/forum">Форум</a></li>
						<li><a href="/library">Библиотека</a></li>
					</ul>
					<ul class="right">
						<li><a href="/auth/login" id="UserAccount">Войти</a></li>
					</ul>
				</nav>
			</div>
		</header>

		<main id="root">
			<noscript>You need to enable JavaScript to run this app.</noscript>
		</main>
	</body>
</html>
<script>
	window.addEventListener('load', function () {
		let preloader = document.querySelector('.preloader-wrapper');
		let spinner = document.querySelector('.spinner');

		preloader.classList.add('preloader-hide');
		setTimeout(function () {
			preloader.style = 'display: none';
		}, 800);
	});
</script>
<script>
	// check login
	fetch('/api/auth/islogin')
		.then((response) => {
			if (response.status == 200) return response.json();
			else return null;
		})
		.then((response) => {
			if (response) {
				let login = response.login;
				let userA = document.querySelector('#UserAccount');
				userA.href = '/api/auth/logout';
				userA.textContent = login;
			}
		})
		.catch((error) => {
			console.log(error);
		});
</script>
